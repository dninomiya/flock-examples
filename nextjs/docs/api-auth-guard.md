作成した Next.js の API には誰でもアクセスできます。APIの中でログイン中のユーザーデータを編集するなど秘匿性の高い処理を行っている場合、APIの実行はログイン中のユーザーにのみ許可しましょう。要するにAPI実行時に「本当にFirebaseでログインしているユーザーか？」を判断し、問題ない場合に限りAPIを実行するようにします。

実装は以下のフローで行います。

1. ログインユーザーのIDトークンを生成する
2. APIからアクセスする際にIDトークンをAPIに渡す
3. API側でIDトークンの正当性を検証する